// ğŸ“ main.js â€“ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„ØªÙ†ÙÙŠØ° ÙƒØ§Ø¨ØªØ´Ø§ Ø°ÙƒÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§ÙˆØ³

import { MouseTracker } from "./MouseTracker.js"; // Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ­Ø¯Ø© ØªØªØ¨Ø¹ Ø­Ø±ÙƒØ© ÙˆØªØ­Ù„ÙŠÙ„ Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…Ø§ÙˆØ³
import { createCheckBoxes } from "./checkboxGenerator.js"; // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª (ÙˆØ§Ø­Ø¯ Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ ÙˆÙ‡Ù…ÙŠ)
import {
  isClickTooFast,     // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ù‚Ø± (Ù‡Ù„ ÙƒØ§Ù†Øª Ø£Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØŸ)
  isCenterClick,      // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù†Ù‚Ø±Ø© ÙÙŠ Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø±Ø¨Ø¹ ØªÙ…Ø§Ù…Ù‹Ø§ (Ø³Ù„ÙˆÙƒ Ø±ÙˆØ¨ÙˆØª Ù…Ø­ØªÙ…Ù„)
  toggleFakeBoxes,    // Ø¯Ø§Ù„Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© ÙŠØ¯ÙˆÙŠÙ‹Ø§ (Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±)
  updateCaptchaBox,   // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ø¨Ø±Ø³Ø§Ø¦Ù„ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
  disableCaptcha,     // Ø¯Ø§Ù„Ø© Ù„ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¹Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ù…ØªØ¹Ø¯Ø¯Ø©
  startBanTimer       // Ø¯Ø§Ù„Ø© ØªØ¨Ø¯Ø£ Ù…Ø¤Ù‚Øª Ø­Ø¸Ø± Ù…Ø¤Ù‚Øª (Ø«ÙˆØ§Ù†Ù) Ø¨Ø¹Ø¯ Ù…Ø­Ø§ÙˆÙ„ØªÙŠÙ† Ø®Ø§Ø·Ø¦ØªÙŠÙ†
} from "./Service.js";

window.toggleFakeBoxes = toggleFakeBoxes; // Ø¬Ø¹Ù„ toggleFakeBoxes Ù…ØªØ§Ø­Ø© ÙÙŠ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ØªØµÙØ­ (Ù…Ø«Ù„Ù‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø®Ø§Ø±Ø¬ÙŠ)
import { sendToBackend } from "./SendToBackend.js"; // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ­Ù„ÙŠÙ„

const checkboxContainer = document.getElementById("checkbox-container"); // Ø¹Ù†ØµØ± HTML Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§
const captchaBox = document.querySelector(".captcha-box"); // Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ (Ù„Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§ÙˆØ³)

const CaptchaState = { // ÙƒØ§Ø¦Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù„ÙƒØ§Ø¨ØªØ´Ø§
  realCheckbox: null,            // Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡ (ÙŠÙØ­Ø¯Ø¯ Ù„Ø§Ø­Ù‚Ù‹Ø§)
  allowClick: false,             // Ù‡Ù„ ÙŠÙØ³Ù…Ø­ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø­Ø§Ù„ÙŠÙ‹Ø§ØŸ (Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±)
  fakeClickCount: 0,             // Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
  fakeBoxIndexes: [],            // ÙÙ‡Ø§Ø±Ø³ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØªÙŠ Ù†ÙÙ‚Ø± Ø¹Ù„ÙŠÙ‡Ø§ Ø¨Ø§Ù„Ø®Ø·Ø£
  userInteraction: {
    lastTime: 0,                 // ØªÙˆÙ‚ÙŠØª Ø¢Ø®Ø± Ù†Ù‚Ø±Ø©
    lastX: 0, lastY: 0,          // Ù…ÙˆÙ‚Ø¹ Ø¢Ø®Ø± Ù†Ù‚Ø±Ø©
    mouseMoved: false,           // Ù‡Ù„ ØªØ­Ø±Ùƒ Ø§Ù„Ù…Ø§ÙˆØ³ Ù‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ø±ØŸ (ÙŠÙØ³ØªØ®Ø¯Ù… ÙƒØ¯Ù„ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ø¨Ø´Ø±ÙŠ)
  },
};

function setupCaptcha() { // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ù…Ù† Ø¬Ø¯ÙŠØ¯
  const checkboxes = createCheckBoxes(); // ØªÙˆÙ„ÙŠØ¯ Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚ (ÙˆØ§Ø­Ø¯ Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ ÙˆÙ‡Ù…ÙŠ)
  CaptchaState.realCheckbox = checkboxes.real; // Ø­ÙØ¸ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ

  checkboxContainer.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù…Ù† Ø£ÙŠ Ù…Ø­ØªÙˆÙ‰ Ù‚Ø¯ÙŠÙ…
  checkboxes.all.forEach((box) => checkboxContainer.appendChild(box)); // Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©

  CaptchaState.allowClick = false; // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ù…Ø¤Ù‚ØªÙ‹Ø§
  const delay = 500 + Math.random() * 1000; // ØªØ£Ø®ÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø¨ÙŠÙ† 500 Ùˆ 1500 Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©

  setTimeout(() => {
    CaptchaState.allowClick = true; // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
    console.log(`ğŸŸ¢ Click allowed after ${Math.round(delay)}ms`); // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
  }, delay);

  window.fakeBoxes = checkboxes.all.filter(box => box !== checkboxes.real); // Ø­ÙØ¸ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© ÙÙŠ Ù…ØªØºÙŠØ± Ø¹Ø§Ù…
}

document.addEventListener("DOMContentLoaded", () => { // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
  document.getElementById("captcha-static-label").textContent = "Click the box to verify you're human."; // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©

  document.addEventListener("mousemove", (event) => { // Ø¹Ù†Ø¯ ØªØ­Ø±Ùƒ Ø§Ù„Ù…Ø§ÙˆØ³ ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†
    if (Math.abs(event.movementX) > 1 || Math.abs(event.movementY) > 1) {
      CaptchaState.userInteraction.mouseMoved = true; // ØªØ³Ø¬ÙŠÙ„ Ø£Ù† Ø§Ù„Ù…Ø§ÙˆØ³ Ù‚Ø¯ ØªØ­Ø±Ùƒ ÙØ¹Ù„Ø§Ù‹
    }
  });

  setupCaptcha(); // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©

  checkboxContainer.addEventListener("click", async (event) => { // Ø¹Ù†Ø¯ Ù†Ù‚Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø£Ø­Ø¯ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª

    /*
    if (!event.isTrusted) {
      console.warn("Untrusted click blocked (likely from a script).");
      return;
    }
    */ // ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ù„Ø­Ø¸Ø± Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø¢Ù„ÙŠØ© Ø§Ù„ØºÙŠØ± Ù…ÙˆØ«ÙˆÙ‚Ø© (Ø¨Ø±Ù…Ø¬ÙŠØ§Øª)

    const now = Date.now(); // Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
    const clickX = event.clientX; // Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø© Ø§Ù„Ø£ÙÙ‚ÙŠ
    const clickY = event.clientY; // Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ
    const timeDiff = CaptchaState.userInteraction.lastTime ? now - CaptchaState.userInteraction.lastTime : null; // Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    CaptchaState.userInteraction.lastTime = now;

    const dx = clickX - CaptchaState.userInteraction.lastX;
    const dy = clickY - CaptchaState.userInteraction.lastY;
    const distance = Math.hypot(dx, dy); // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ÙØ¹Ù„ÙŠØ© Ø§Ù„ØªÙŠ ØªØ­Ø±Ùƒ ÙÙŠÙ‡Ø§ Ø§Ù„Ù…Ø§ÙˆØ³

    if (
      !CaptchaState.allowClick || // Ø§Ù„Ù†Ù‚Ø± Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³Ù…ÙˆØ­
      isClickTooFast(timeDiff) || // Ø§Ù„Ù†Ù‚Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ù‹Ø§
      !CaptchaState.userInteraction.mouseMoved || // Ù„Ù… ÙŠØªÙ… ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù…Ø§ÙˆØ³
      distance < 10 // Ø§Ù„Ø­Ø±ÙƒØ© ÙƒØ§Ù†Øª Ø´Ø¨Ù‡ Ù…Ø¹Ø¯ÙˆÙ…Ø© (Ø¶ØºØ· Ù…Ø¨Ø§Ø´Ø±)
    ) {
      console.warn("âš ï¸ Suspicious click attempt");
      return handleFakeClick(event); // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§ ÙƒÙ…Ø­Ø§ÙˆÙ„Ø© Ø®Ø§Ø·Ø¦Ø©
    }

    if (event.target === CaptchaState.realCheckbox) { // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØµØ­ÙŠØ­
      const rect = event.target.getBoundingClientRect(); // Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ø±Ø¨Ø¹
      const diffX = Math.abs(clickX - (rect.left + rect.width / 2));
      const diffY = Math.abs(clickY - (rect.top + rect.height / 2));

      if (isCenterClick(diffX, diffY)) {
        console.warn("ğŸ¤– Click was too perfect, suspicious"); // Ù†Ù‚Ø± Ù…Ø«Ø§Ù„ÙŠ Ø¬Ø¯Ù‹Ø§ØŒ Ø§Ø­ØªÙ…Ø§Ù„ Ø±ÙˆØ¨ÙˆØª
        return handleFakeClick(event);
      }

      console.log("âœ… Verification successful");
      CaptchaState.fakeClickCount = 0;
      CaptchaState.fakeBoxIndexes = [];

      const data = MouseTracker.handleClick(event); // ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ©
      if (!data || !data.speedSeries || data.speedSeries.length < 5) {
        console.warn("â›” Ignored incomplete or invalid data.");
        return;
      }

      checkboxContainer.innerHTML = `<div class="loading-spinner"></div>`; // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± ØªØ­Ù…ÙŠÙ„

      const result = await sendToBackend(data); // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…

      if (result?.status === "banned") {
        checkboxContainer.innerHTML = `
          <div style="color: red; font-size: 20px; font-weight: bold;">
            ğŸš« Access denied. You have been permanently banned.
          </div>`;
        document.getElementById("captcha-static-label").style.display = "none";
        return;
      }

      if (result?.status === "human") {
        document.getElementById("captcha-static-label").style.display = "none";
        checkboxContainer.innerHTML = `
          <div style="color: green; font-size: 20px; font-weight: bold;">
            âœ… Welcome! You have been verified as human.
          </div>`;
      }
    } else {
      handleFakeClick(event); // Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø®Ø§Ø·Ø¦
    }

    CaptchaState.userInteraction.lastX = clickX; // Ø­ÙØ¸ Ù…ÙˆÙ‚Ø¹ Ø¢Ø®Ø± Ù†Ù‚Ø±Ø©
    CaptchaState.userInteraction.lastY = clickY;
    CaptchaState.userInteraction.mouseMoved = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ØªØºÙŠØ±
  });

  if (captchaBox) { // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ù†ØµØ± Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
    captchaBox.addEventListener("mouseenter", (event) =>
      MouseTracker.startTracking(event)); // Ø¨Ø¯Ø¡ ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø±ÙƒØ© Ø¹Ù†Ø¯ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø§ÙˆØ³

    captchaBox.addEventListener("mousemove", (event) =>
      MouseTracker.trackMovement(event)); // ØªØ³Ø¬ÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§ÙˆØ³ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚
  }
});

async function handleFakeClick(event) { // Ø¯Ø§Ù„Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø®Ø§Ø·Ø¦
  event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
  CaptchaState.fakeClickCount++; // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©

  const boxIndex = [...checkboxContainer.querySelectorAll("input")].indexOf(event.target);
  CaptchaState.fakeBoxIndexes.push(boxIndex); // Ø­ÙØ¸ Ø§Ù„ÙÙ‡Ø±Ø³ Ù„Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø°ÙŠ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡

  if (CaptchaState.fakeClickCount === 1) {
    console.log("âš ï¸ First Fail");
    setupCaptcha(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§
  } else if (CaptchaState.fakeClickCount === 2) {
    console.log("âš ï¸ Second Fail: Banned for 2 Sec");
    startBanTimer(2, () => setTimeout(setupCaptcha, 1500)); // ØªÙ†ÙÙŠØ° Ø­Ø¸Ø± Ù…Ø¤Ù‚Øª Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§
  } else if (CaptchaState.fakeClickCount >= 3) {
    console.log("âš ï¸ Third Fail: Banned!");
    disableCaptcha(); // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ÙƒØ§Ø¨ØªØ´Ø§ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§

    const report = {
      mode: "robot-detected", // Ø³Ø¨Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
      reason: "Three fake clicks detected",
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent,
      boxIndexes: CaptchaState.fakeBoxIndexes,
      pageUrl: window.location.href,
    };

    const result = await sendToBackend(report); // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø®Ù„ÙÙŠØ©

    if (result?.status === "banned") {
      checkboxContainer.innerHTML = `
        <div style="color: red; font-size: 20px; font-weight: bold;">
          ğŸš« You have been permanently banned.
        </div>`;
      document.getElementById("captcha-static-label").style.display = "none";
    }

    CaptchaState.fakeClickCount = 0;
    CaptchaState.fakeBoxIndexes = []; // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø­Ø§Ù„Ø©
  }
}
